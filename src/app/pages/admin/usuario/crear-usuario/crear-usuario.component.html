<mat-card class="cardWithShadow">
  <mat-card-header>
    <mat-card-title>Crear Usuario</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form
      [formGroup]="usuarioForm"
      (ngSubmit)="onSubmit()"
      class="form-container"
    >
      <div fxLayout="row" fxLayoutGap="16px" fxLayoutAlign="start center">
        <div fxFlex></div>
      </div>

      <!-- Tipo de Usuario (Select) -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Tipo de Usuario</mat-label>
        <mat-select formControlName="idCatTipoUsuario">
          <mat-option *ngFor="let tipo of tiposUsuario" [value]="tipo.id">
            {{ tipo.nombre }}
          </mat-option>
        </mat-select>
        <mat-error
          *ngIf="usuarioForm.get('idCatTipoUsuario')?.hasError('required')"
        >
          Este campo es obligatorio.
        </mat-error>
      </mat-form-field>

      <!-- Correo -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Correo</mat-label>
        <input matInput type="email" formControlName="correo" />
        <mat-error *ngIf="usuarioForm.get('correo')?.hasError('required')">
          El correo es obligatorio.
        </mat-error>
        <mat-error *ngIf="usuarioForm.get('correo')?.hasError('email')">
          El correo no es válido.
        </mat-error>
      </mat-form-field>

      <!-- Contraseña -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Contraseña</mat-label>
        <input matInput type="password" formControlName="contrasena" />
        <mat-error *ngIf="usuarioForm.get('contrasena')?.hasError('required')">
          La contraseña es obligatoria.
        </mat-error>
        <mat-error *ngIf="usuarioForm.get('contrasena')?.hasError('minlength')">
          La contraseña debe tener al menos 8 caracteres.
        </mat-error>
      </mat-form-field>

      <!-- Re-Contraseña -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>confirmar contraseña</mat-label>
        <input
          matInput
          type="password"
          formControlName="confirmar_contrasena"
        />
        <mat-error
          *ngIf="usuarioForm.get('confirmar_contrasena')?.hasError('required')"
        >
          La contraseña es obligatoria.
        </mat-error>
        <mat-error
          *ngIf="usuarioForm.get('confirmar_contrasena')?.hasError('minlength')"
        >
          La contraseña debe tener al menos 8 caracteres.
        </mat-error>
        <mat-error
          *ngIf="
            usuarioForm.get('confirmar_contrasena')?.hasError('checkPasswords')
          "
        >
        </mat-error>
        <mat-error *ngIf="usuarioForm.hasError('checkPasswords')">
          Las contraseñas no coinciden. {{ usuarioForm.errors | json }}
        </mat-error>
      </mat-form-field>

      <!-- Nombres -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Nombres</mat-label>
        <input matInput type="text" formControlName="nombres" />
        <mat-error *ngIf="usuarioForm.get('nombres')?.hasError('required')">
          Este campo es obligatorio.
        </mat-error>
      </mat-form-field>

      <!-- Apellidos -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Apellidos</mat-label>
        <input matInput type="text" formControlName="apellidos" />
        <mat-error *ngIf="usuarioForm.get('apellidos')?.hasError('required')">
          Este campo es obligatorio.
        </mat-error>
      </mat-form-field>

      <!-- Teléfono -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Teléfono</mat-label>
        <input matInput type="text" formControlName="telefono" />
        <mat-error *ngIf="usuarioForm.get('telefono')?.hasError('required')">
          Este campo es obligatorio.
        </mat-error>
        <mat-error *ngIf="usuarioForm.get('telefono')?.hasError('pattern')">
          El teléfono debe contener solo números.
        </mat-error>
      </mat-form-field>

      <!-- Botones -->
      <div class="button-container">
        <button
          mat-raised-button
          color="primary"
          type="submit"
          [disabled]="!usuarioForm.valid"
        >
          Guardar
        </button>
        <button mat-stroked-button color="warn" type="reset">Cancelar</button>
      </div>
    </form>
  </mat-card-content>
</mat-card>
